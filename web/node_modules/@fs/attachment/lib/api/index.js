/**
 * Created by Julin on 2021/04/02.
 */
'use strict';

const attachment = require('./controller');

module.exports = function (app, router, opts, mw) {

    let prefix = opts.routePrefix ? `/${opts.routePrefix}` : '';

    /**
     * @api {POST} /attachments/:p 上传文件.
     * @apiVersion 1.0.0
     * @apiGroup Attachment
     */
    router.post(`${prefix}/attachments/:p`, attachment.upload(mw));

    /**
     * @api {GET} /attachments 下载文件.
     * @apiVersion 1.0.0
     * @apiGroup Attachment
     */
    router.get(`${prefix}/attachments`, attachment.download(mw));

    /**
     * @api {DELETE} /attachments 删除文件.
     * @apiVersion 1.0.0
     * @apiGroup Attachment
     */
    router.del(`${prefix}/attachments`, attachment.deletee(mw));

    /**
     * @api {POST} /attachments 批量删除文件.
     * @apiVersion 1.0.0
     * @apiGroup Attachment
     */
    router.post(`${prefix}/attachments`, attachment.bulkDelete(mw));

    return router;
}
